<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!-- подключаем стили Mocha, для отображения результатов -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
  <!-- подключаем библиотеку Mocha -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
  <!-- подключаем chai -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/2.0.0/chai.js"></script>
  <!-- настраиваем Mocha: предстоит BDD-тестирование -->
  <script>
    mocha.setup('bdd');
  </script>
  <!-- в chai есть много всего, выносим assert в глобальную область -->
  <script>
    var assert = chai.assert;
  </script>
</head>
<body>
  <script type="text/javascript">

    // 1 задача
    function sumAll(arr) {
      let arg_1 = arr[0];
      let arg_2 = arr[1];
      let sum_arr = 0;
      let sum_arg = arg_1 + arg_2;

      if (arg_1 === arg_2) {
        return sum_arg;
      }

      if (arg_1 > arg_2) {
        arg_2++;
        for (let i = arg_2; i < arg_1; i++) {
          sum_arr += i;
        }
      } else {
        arg_1++;
        for (let i = arg_1; i < arg_2; i++) {
          sum_arr += i;
        }
      }

      return sum_arr + sum_arg;
    }

    // 2 задача
    function findNewItem(arr1, arr2) {

      let new_arr = [];

      if (arr1.length === 0 && arr2.length === 0) {
        return "Ошибка: оба массива пустые";
      }
      
      if (arr1.length !== 0) {
        arr1.forEach(element => {
          new_arr.push(element);
        });
      } else {
        arr2.forEach(element => {
          new_arr.push(element);
        });
      }

      return new_arr;
    }

    // 3 задача 
    function deleteItemArr(arr, ...rest) {
      for (let i = 1; i < arguments.length; i++) {
        arr.splice(arr.indexOf(arguments[i]), 1)
      }

      return arr;
    }

    // 4 задача
    function whatIsInAName(mass_obj, obj) {
      let new_mass = [];

      for (let i = 0; i < mass_obj.length; i++) {
        if (mass_obj[i].apple === obj.apple && mass_obj[i].bat === obj.bat) {
          new_mass.push(mass_obj[i]);
        }
      }

      return new_mass;
    }
    
    // 5 задача
    function spinalCase(str) {
      let new_str = str.replace(/[^a-zA-Z]/gim,'-');
      new_str =  new_str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();

      return new_str;
    }

    // 6 задача
    function findStrReplace(str, word, word_rep) { 
      let regex = new RegExp(word, 'gim'); 
      let new_str = str.match(regex); 
      let word_str = new_str.join('');
      let char_str = word_str[0];
      let char_word_rep = word_rep[0];

      if (char_str === char_word_rep) {
        str = str.replace(word, word_rep);
      } else {
        word = word[0].toUpperCase() + word.slice(1);
        word_rep = word_rep[0].toUpperCase() + word_rep.slice(1);

        str = str.replace(word, word_rep)
      }

      return str; 
    } 

    // 7 задача
    function findMissing(str) {
      let array = str.split('');

      for (let i = 1; i < array.length; i++) {
        let prev = array[i - 1].charCodeAt();
        let current = array[i].charCodeAt();
    
        if (current - prev !== 1) {  
          return String.fromCharCode(prev + 1);
        }
      }

      return "undeﬁned";
    }

    // 8 задача
    function createNewMass() {
      let new_arr = [];
      
      for (let i = 0; i < arguments.length; i++) {
        new_arr = Array.from(new Set(arguments[0].concat(arguments[i])));
      }

      return new_arr;
    }

    // 9 задача
    function characterReplacement(str) {
      str = str.replace(/&/g, "&#8216;");
      str = str.replace(/</g, "&lt;");
      str = str.replace(/>/g, "&gt;");
      str = str.replace(/\"\"/g, "&gt;");
      str = str.replace(/‘/g, "&gt;");

      return str;
    }

    // 10 задача
    function sumPrimeNumbers(n) {
      let sum = 0;

      nextPrime:
      for (let i = 2; i <= n; i++) { 

        for (let j = 2; j < i; j++) { 
          if (i % j == 0) continue nextPrime; 
        }

            sum += i;
      }

      return sum;
    }

    // 11 задача
    function dropElements(arr, func) {
      return arr.filter(func);
    }

    console.log(dropElements([1, 2, 3, 4], function(n) {return n >= 3;}))

    // 12 задача
    function steamrollArray(arr) {
      return arr.reduce((flattenArray, element) => {
        return Array.isArray(element) ? [...flattenArray, ...steamrollArray(element)] : [...flattenArray, element]
      }, [])
    }

    // 13 задача
    function sumArgs(a, b) {
      if (a && b) {
        return a + b;
      }

      if (!a) {
        return oneArg(b);
      }

      if (!b) {
        return oneArg(a);
      }
    }

    function oneArg(arg) {
      let arg_pr = null;

      while(arg_pr === null) {
        arg_pr = prompt("Введите еще один аргумент");
      }

      if (!isNaN(arg_pr)) {
        arg_pr = parseFloat(arg_pr);

        return arg_pr + arg;
      } else {
        arg_pr = prompt("Введите еще один аргумент");
      }
    }
  </script>

<script src="./js/main.js" charset="utf-8"></script>
<div class="mocha" id="mocha"></div>
<!-- запустить тесты! -->
<script>
  mocha.run();
</script>
</body>
</html>
